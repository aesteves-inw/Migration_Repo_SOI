ÿÿo"key"œ00D3M0000008mnt0DB58000000L0EM0053M000000VBg6en_UScf496403-d8e3-4135-ae9d-f09be8cf1ba9BLM15114571800000000000000949.0:markup://reports:EclairConfigurerUtils"itemo"value"™{"descriptor":"markup://reports:EclairConfigurerUtils","includes":{"BaseInput":"js://reports.EclairConfigurerUtils.BaseInput","OptionalFieldControl":"js://reports.EclairConfigurerUtils.OptionalFieldControl","buildPalettePreview":"js://reports.EclairConfigurerUtils.buildPalettePreview","buildColorSelector":"js://reports.EclairConfigurerUtils.buildColorSelector","AxisInput":"js://reports.EclairConfigurerUtils.AxisInput","BooleanInput":"js://reports.EclairConfigurerUtils.BooleanInput","ColorInput":"js://reports.EclairConfigurerUtils.ColorInput","EnumInput":"js://reports.EclairConfigurerUtils.EnumInput","GroupInput":"js://reports.EclairConfigurerUtils.GroupInput","IntegerInput":"js://reports.EclairConfigurerUtils.IntegerInput","RangeInput":"js://reports.EclairConfigurerUtils.RangeInput","TextInput":"js://reports.EclairConfigurerUtils.TextInput","OrInput":"js://reports.EclairConfigurerUtils.OrInput","AxisOrchestrator":"js://reports.EclairConfigurerUtils.AxisOrchestrator","ConfigHelpers":"js://reports.EclairConfigurerUtils.ConfigHelpers","buildConfig":"js://reports.EclairConfigurerUtils.buildConfig","buildChartSelector":"js://reports.EclairConfigurerUtils.buildChartSelector","referenceLineHelper":"js://reports.EclairConfigurerUtils.referenceLineHelper","ColumnInput":"js://reports.EclairConfigurerUtils.ColumnInput","RadioInput":"js://reports.EclairConfigurerUtils.RadioInput","AxisRangeInput":"js://reports.EclairConfigurerUtils.AxisRangeInput"},"includeClasses":"function(){$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.BaseInput\",[\"js://reports.EclairConfigurerUtils.OptionalFieldControl\"],function(l){function c(a,b,e,d,c){this._context=a;this._item=b;this._handler=e;this._node=null;this._axes=c||{};this._lineItems=[];this._instanceData=[];this._focusable=!0;this._optionalFieldControl=new l(this,this.increment.bind(this));d&&b.property&&(this._default=d[b.property])}var m=0;c.prototype._createLineItem=function(a,b){var e=document.createElement(\"div\");\ne.className=\"config-config-item-line\"+(b?\" is-optional\":\"\");e.appendChild(a);this._lineItems.push(e);if(b&&!this._context.isDisabled){var d=this._getNewId(),d=l.renderInlineMinus(c.renderLabel(this._context,{section:\"EclairConfig\",id:\"deleteItem\",fallback:\"Delete Item\"}),function(){this.decrement(e)}.bind(this),d);e.appendChild(d)}this._afterRender&&this._afterRender();return e};c.prototype._addInputLabel=function(a,b){var e=this._getInputNode(a);if(e){var d=document.createElement(\"label\");d.setAttribute(\"for\",\ne.id);d.className=\"assistive-text\";var f=c.renderLabel(this._context,{section:\"EclairConfig\",id:\"multiInputCombiner\",fallback:\"{0} {1}\"}),f=(void 0===this._item.min||1===this._item.min)&&(void 0===this._item.max||1===this._item.max)?\"\":f.replace(\"{0}\",this.name()).replace(\"{1}\",b);d.textContent=f;a.childNodes[0].insertBefore(d,e)}};c.prototype._getNewId=function(){return\"ECLAIR_CHART_CONFIG_BASE_INPUT_\"+ ++m};c.prototype.name=function(){var a=this._item.type.toLowerCase();return this._context&&this._context.localize?\nthis._context.localize({section:\"EclairConfig\",id:a,fallback:a}):a};c.prototype.node=function(){return this._node};c.prototype.item=function(){return this._item};c.prototype.context=function(){return this._context};c.prototype.increment=function(){if(this._lineItems.length+1>this._item.max)return!1;var a=this._createLineItem(this._render(this._lineItems.length,this._item.max),!0);this._node.insertBefore(a,this._optionalFieldControl.node());this.incrementable()||this._optionalFieldControl.toggle(!1);\nif(this._focusable){var b=this._getInputNode(a);b&&(b.id=this._getNewId(),this._addInputLabel(a,this._lineItems.length))}else(a=a.querySelector(\".option-field-minus\"))&&a.focus();this._handler();b&&b.focus();return!0};c.prototype.incrementable=function(){return this._lineItems.length+1<=this._item.max};c.prototype.decrement=function(a){var b=this._lineItems.indexOf(a);this._instanceData.splice(b,1);this._lineItems.splice(b,1);window.setTimeout(function(){c.removeNode(a);this._afterRender&&this._afterRender();\nthis._optionalFieldControl.toggle(!0);this._handler()}.bind(this),10)};c.prototype.decrementable=function(){return this._lineItems.length-1>=this._item.min};c.prototype.rendersOwnTitle=function(){return!1};c.prototype.render=function(a){var b=this._item.min||1,c=this._item.max||1,d=\"config-input config-input-\"+this._item.type.toLowerCase();this._item.property&&this._item.property!==this._item.type.toLowerCase()&&(d+=\" config-input-\"+this._item.property);b!==c||1<b||this.displayAsGroup()?this._renderGroup(a,\nd,b,c):this._renderSingle(a,d)};c.prototype.displayAsGroup=function(){return!1};c.prototype._renderSingle=function(a,b){var e=document.createElement(\"div\");e.className=\"config-config-item-line \"+b;if(this.rendersOwnTitle())this._render(0,this._item.max,e);else{var d=this._getNewId();if(this._item.label){var f=c.renderLabel(this._context,this._item.label),g=document.createElement(\"label\");g.textContent=f;g.classList.add(\"label\");g.classList.add(\"item-title\");g.setAttribute(\"for\",d);e.appendChild(g)}\"OR\"===\nthis._item.type?f=this._render(0,this._item.max,d):(f=this._render(0,this._item.max),f.id=d);e.appendChild(f)}!1===this._context.isDisplayUnitsVisible&&\"numberUnits\"===this._item.property||!1===this._context.isDecimalPlacesVisible&&\"decimalPlaces\"===this._item.property||(this._lineItems.push(e),this._afterRender&&this._afterRender(),this._node=e,a.appendChild(e))};c.prototype._renderGroup=function(a,b,e,d){var f=document.createElement(\"fieldset\");f.className=b;var g;this._item.label&&(b=c.renderLabel(this._context,\nthis._item.label),g=document.createElement(\"legend\"),g.textContent=b,g.classList.add(\"label\"),g.classList.add(\"item-title\"),f.appendChild(g));for(b=0;b<this.numChildren();b++){var k=this._render(b,d),k=this._createLineItem(k,b>=e),h=this._getInputNode(k);h&&(h.id=this._getNewId(),this._addInputLabel(k,b+1),g&&g.setAttribute(\"for\",h.id));f.appendChild(k)}e<d&&(f.appendChild(this._optionalFieldControl.node()),this._optionalFieldControl.toggle(this.numChildren()<d));this._node=f;a.appendChild(f)};c.prototype._renderCheckbox=\nfunction(a,b,c,d,f,g){var k=\"config-axis-\"+b;b=document.createElement(\"div\");b.className=k;var h=document.createElement(\"input\");h.className=k+\"-checkbox config-boolean-selector\";h.type=\"checkbox\";h.checked=d;h.value=c;h.onchange=g||this._handler;h.id=this._getNewId();b.appendChild(h);c=document.createElement(\"label\");c.classList.add(\"label\");c.textContent=$A.get(\"$Label.EclairConfig.\"+f);c.setAttribute(\"for\",h.id);b.appendChild(c);a.appendChild(b);return b};c.prototype.numChildren=function(){return this._item.min||\n1};c.prototype.populate=function(a){this._lineItems.forEach(function(b,c){for(var d,f=0;f<b.children.length;f++){var g=b.children[f];if(!(\"INPUT\"!==g.tagName&&\"SELECT\"!==g.tagName)){d=b.children[f];break}}d=this._populate(d,c);void 0!==d&&(!this._item.min&&!this._item.max||1===this._item.min&&1===this._item.max?a[this._item.property]=d:(a[this._item.property]=a[this._item.property]||[],a[this._item.property].push(d)))},this)};c.prototype.focus=function(){var a=this._lineItems&&this._lineItems[0];\n(a=a&&this._getInputNode(a))&&a.focus()};c.prototype._getInputNode=function(a){return a.querySelector(\"input\")};c.prototype._handleDelete=function(a){};c.selectDropdown=function(a,b){Array.prototype.slice.call(a.options).some(function(c,d){return c.value===b?(a.selectedIndex=d,!0):!1})};c.DEFAULT_COLOR=\"#ff00ff\";c.parseColor=function(a){return a&&7===a.length&&\"#\"===a.charAt(0)?a:!a||\"#\"!==a.charAt(0)||4!==a.length?c.DEFAULT_COLOR:\"#\"+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)+a.charAt(3)+a.charAt(3)};\nc.renderLabel=function(a,b){return a.localize&&a.localize(b)||b&&b.fallback||b||\"\"};c.removeNode=function(a){a&&a.remove?a.remove():a&&a.parentNode&&a.parentNode.removeChild(a)};c.setNodeVisibility=function(a,b){a&&(a.style.display=b?\"block\":\"none\")};c.prototype.toggleAxisErrorMessage=function(a,b,e){var d=this._lineItems[a].querySelector(\".config-axis-container\");a=this._instanceData[a];e?(d.dataset.message=c.renderLabel(this._context,b),d.classList.add(\"input-error\"),a.hasError=!0):(d.dataset.message=\n\"\",d.classList.remove(\"input-error\"),a.hasError=!1)};return c});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.OptionalFieldControl\",[],function(){function c(b,a){this._node=null;this._widget=b;this._callback=a||function(){}}var e=0;c.prototype.toggle=function(b,a){this._plus&&(void 0===b&&\"none\"!==this._plus.style?b=!1:void 0===b&&(b=!0),b?(this._plus.style.display=\"block\",a||this._plus.focus()):this._plus.style.display=\"none\")};c.prototype.node=function(){if(!this._node){this._plus=null;var b=\"ANALYTICS_ECLAIR_CONFIGURER_UTILS_PLUS_\"+\ne++;this._node=document.createElement(\"div\");this._node.className=\"option-field-buttons\";var a=document.createElement(\"button\");a.textContent=\"+ \"+this._widget.name();a.dataset.type=\"PLUS\";a.className=\"optional-field-plus\";a.style.display=\"none\";a.onclick=this._callback.bind(a,a);a.id=b;this._plus=a;this._node.appendChild(this._plus)}return this._node};c.renderInlineMinus=function(b,a,c){this._node=document.createElement(\"div\");this._node.className=\"option-field-inline-minus-button\";var d=document.createElement(\"button\");\nd.className=\"option-field-minus\";d.setAttribute(\"aria-labelledby\",c);d.onclick=a;a=document.createElement(\"img\");a.src=\"/img/icon/t4/utility/close_60.png\";a.alt=b;d.appendChild(a);a=document.createElement(\"span\");a.textContent=b;a.className=\"assistive-text\";a.id=c;this._minus=d;this._node.appendChild(this._minus);this._node.appendChild(a);return this._node};return c});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.buildPalettePreview\",[\"js://reports.EclairConfigurerUtils.OptionalFieldControl\"],function(){var g=0;return function(d,e,h,k){var b=document.createElement(\"div\");b.style.position=\"relative\";b.className=\"config-palette-select\";var c=document.createElement(\"select\");c.id=\"ECLAIR_CHART_PALETTE_INPUT_\"+g++;var a=document.createElement(\"label\");a.className=\"assistive-text\";a.textContent=$A.get(\"$Label.EclairConfig.colorPalettePicker\");\na.setAttribute(\"for\",c.id);e.forEach(function(b,l){var a=document.createElement(\"option\");a.value=l;a.textContent=b.label;c.appendChild(a)});c.onchange=k;var f=document.createElement(\"div\");d.colors.slice(0,3).forEach(function(b){var a=document.createElement(\"div\");a.className=\"config-preview-swatch\";a.style.backgroundColor=b;f.appendChild(a)});b.appendChild(c);b.appendChild(a);b.appendChild(f);h.appendChild(b);c.selectedIndex=e.indexOf(d);return b}});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.buildColorSelector\",[\"js://reports.EclairConfigurerUtils.OptionalFieldControl\"],function(){function m(){if(null===b){var d=document.createElement(\"input\");try{d.setAttribute(\"type\",\"color\"),b=\"color\"===d.type}catch(q){b=!1}}return b}var n=0,b=null;return function(d,b,p,h){var c=document.createElement(\"div\");c.style.position=\"relative\";c.className=\"config-color-select-container\";var e=document.createElement(\"div\"),k=m();if(k){var a=\ndocument.createElement(\"input\");a.id=\"ECLAIR_CHART_COLOR_INPUT_\"+n++;a.setAttribute(\"type\",\"color\");a.onchange=function(){e.style.backgroundColor=a.value;h(a.value);a.setAttribute(\"value\",a.value)};a.value=d;a.setAttribute(\"value\",d);var f=document.createElement(\"label\");f.className=\"assistive-text\";f.textContent=$A.get(\"$Label.EclairConfig.colorPicker\");f.setAttribute(\"for\",a.id);c.appendChild(a);c.appendChild(f)}else{var g=document.createElement(\"select\"),l=0;b.forEach(function(a,c){var b=document.createElement(\"option\");\nb.value=c;b.textContent=a.label;b.style.color=a.color;g.appendChild(b);(a.color&&a.color.toUpperCase())===(d&&d.toUpperCase())&&(l=c)});g.onchange=function(){var a=b[this.selectedIndex].color;e.style.backgroundColor=a;h(a)};c.appendChild(g)}e.className=\"config-preview-color\";e.style.backgroundColor=d;c.appendChild(e);p.appendChild(c);k||(c.children[0].selectedIndex=l);return c}});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.AxisInput\",\"js://reports.EclairConfigurerUtils.BaseInput js://reports.EclairConfigurerUtils.referenceLineHelper js://reports.EclairConfigurerUtils.buildPalettePreview js://reports.EclairConfigurerUtils.buildColorSelector js://reports.services.ReportResultTransformService js://reports.services.PicklistColorService\".split(\" \"),function(k,s,t,u,n,q){function d(b,f,a,e,l,c){k.call(this,b,f,a,e,l);this._axisOrchestrator=c;this._focusable=\n!(\"DIMENSION\"===f.type&&b.hardcodedDimChoice)&&!(\"MEASURE\"===f.type&&b.hardcodedMeasureChoice)}d.prototype=Object.create(k.prototype);d.prototype.constructor=d;d.prototype._selectAxisDropdown=function(b,f,a){k.selectDropdown(b,f);a.selectedColumn=f};d.prototype.numChildren=function(){return Math.max(k.prototype.numChildren.call(this),this._default&&this._default.fields&&this._default.fields.length||0)};d.prototype.rerenderSelectOptionsForMeasure=function(b,f,a,e){if(\"MEASURE\"===this._item.type){var l=\nthis._getChildLineItemsNodes();Array.prototype.slice.apply(l).forEach(function(c,l){var g=c.querySelector(\"select\");null!==g&&this._rerenderEachSelectOption(g,l,b,e,a,f)},this)}};d.prototype._rerenderEachSelectOption=function(b,f,a,e,l,c){var h=b.querySelector('option[value\\x3d\"'+e+'\"]');!a&&h?b.removeChild(h):a&&!h?(f=document.createElement(\"option\"),f.textContent=l,f.value=e,b.appendChild(f)):h&&(this._instanceData[f]&&this._instanceData[f].hasError!==a)&&(this._instanceData[f].hasError=!a,c.__hasError__=\n!a)};d.prototype._render=function(b,f){var a=this._item.type,e=\"MEASURE\"===a?this._axes.measures:this._axes.dimensions,l=this._default&&this._default.fields&&this._default.fields[b]||{},c={};this._instanceData[b]=c;var h=document.createElement(\"div\");h.className=\"config-axis-container\"+(this._isItemColorable(b,f)?\" colorable\":\"\");var g=document.createElement(\"select\");g.className=\"config-axis-selector \"+a.toLowerCase();(e||[]).forEach(function(a,b){var c=document.createElement(\"option\");c.textContent=\na.label;c.value=a.column;g.appendChild(c)});e=this._axisOrchestrator.getAvailableColumns(this)||[e[0].column];this._default&&-1!==e.indexOf(l.column)?this._selectAxisDropdown(g,l.column,c):this._selectAxisDropdown(g,e[0],c);g.onchange=function(a){a=g.options[g.selectedIndex].value;this._axisOrchestrator.handleChange(this,b,a,c.selectedColumn);c.selectedColumn=a;c.hasError=!1;this._axisOrchestrator.validateAxisTypes(this);this._handler()}.bind(this);\"DIMENSION\"===a&&this._context.hardcodedDimChoice&&\n(g.disabled=!0,g.classList.add(\"as-label\"));\"MEASURE\"===a&&this._context.hardcodedMeasureChoice&&(g.disabled=!0,g.classList.add(\"as-label\"));\"DIMENSION\"===a&&this._context.isDisabled&&(g.disabled=!0,g.classList.add(\"disabled\"));\"MEASURE\"===a&&this._context.isDisabled&&(g.disabled=!0,g.classList.add(\"disabled\"));h.appendChild(g);var d=this,e=this._isItemColorable(b,f);if(\"MEASURE\"===a&&e){var e=!this._item.role||\"PRIMARY\"===this._item.role||!this._context.secondaryColors?this._context.colors:this._context.secondaryColors,\ne=e[b%e.length].color,e=this._item.defaultColors&&this._item.defaultColors[b]?k.parseColor(this._item.defaultColors[b]):e,m=this._default&&this._default.fields&&this._default.fields[b]&&this._default.fields[b].color;c.color=m||e||this._context.colors[0];this._context.isColorSupported&&(c.colorPreview=u(c.color,d._context.colors,h,function(a){c.color=a;d._handler()}))}else if(\"DIMENSION\"===a&&e){var p=this._default&&this._default.fields&&this._default.fields[b],r=null;this._context.palettes.some(function(a){return p&&\np.__paletteId__===a.id||(!p||p&&!p.__paletteId__)&&c.selectedColumn&&q.isCorrectPalette(c.selectedColumn,a)?(r=a,!0):!1});c.palette=r||this._context.palettes[0];c.palettes=this._context.palettes;if(this._context.isColorSupported&&!this._context.palettes.hasPicklistColors){var n=function(){c.palette=d._context.palettes[this.selectedIndex];k.removeNode(c.palettePreview);c.palettePreview=t(c.palette,d._context.palettes,h,n);d._handler()};c.palettePreview=t(c.palette,this._context.palettes,h,n)}}\"MEASURE\"===\na&&(this._item.supportsReferenceLines&&this._context.isReferenceLineSupported)&&(c.refLineData=s.render(h,l,this._context.colors,this._handler));if(\"MEASURE\"===a&&(this._item.supportsLineForSecondMeasure||this._item.secondMeasureIsLine))if(a=1===b&&(\"line\"===l.mark||1<this._axisOrchestrator.getDimensionCount()),e=function(a){this._axisOrchestrator.validateAxisTypes(this);this._handler()}.bind(this),this._item.supportsLineForSecondMeasure&&(c.plotAsLineNode=this._renderCheckbox(h,\"plot-line\",\"plotAsLine\",\na,\"plotAsLine\",e)),this._item.supportsLineForSecondMeasure||this._item.secondMeasureIsLine)c.plotOnSecondAxisNode=this._renderCheckbox(h,\"plot-second-axis\",\"plotOnSecondAxis\",\"axis2\"===l.axis,\"plotOnSecondAxis\",e);return h};d.prototype._isItemColorable=function(b,f){var a=this._item.type;if(this._item.colorable){if(\"MEASURE\"===a)return!!this._context.colors;if(\"DIMENSION\"===a)return b===f-1&&!!this._context.palettes}return!!this._context.useCustomizeColorPalette};d.prototype._populate=function(b,\nf){var a=b.querySelector(\"select\"),e=this._item.type;if(a&&a.options[a.selectedIndex]){var d=a.options[a.selectedIndex].value,c=null;this._axes[\"MEASURE\"===e?\"measures\":\"dimensions\"].some(function(a){return a.column===d?(c=JSON.parse(JSON.stringify(a)),!0):!1});a=this._instanceData[f];if(c&&a){if(a.color)c.color=a.color;else if(a.palette){var h,g;d&&(g=d.indexOf(n.LABEL_SUFFIX),0>g&&(g=d.indexOf(n.VALUE_SUFFIX)),g=0<g&&d.substr(0,g));if(a.palette.colorMap&&g===a.palette.id)q.addValueColors(c,a.palette.colorMap,\na.palettes&&a.palettes.stringifyColorMapKeys),h=a.palette.id;else{if(a.palettes)for(var k=0;k<a.palettes.length;k++){var m=a.palettes[k];if(m.colorMap&&(m.id===c.__paletteId__?h=m.id:m.id===g&&(h=g),h)){q.addValueColors(c,m.colorMap,a.palettes.stringifyColorMapKeys);break}}h||(c.colors=a.palette.colors,h=a.palette.id)}c.__paletteId__=h}a.hasError&&(c.__hasError__=!0);a.refLineData&&s.populate(c,a.refLineData);\"MEASURE\"===e&&(c.mark=\"bar\",c.axis=\"axis1\",e=this.isMeasurePlottedAsLine(f),this._item.supportsLineForSecondMeasure&&\n2===this._axisOrchestrator.getMeasureCount()?(c.mark=e?\"line\":\"bar\",this.putMeasureOnCombo(f,e,c)):this._item.secondMeasureIsLine&&1===f&&(c.mark=\"line\",this.putMeasureOnCombo(f,e,c)))}return c}};d.prototype.putMeasureOnCombo=function(b,f,a){a.axis=f&&this.isMeasureOnSecondAxis(b)?\"axis2\":\"axis1\";f&&1<this._axisOrchestrator.getDimensionCount()&&(a.subtotals=!0,a.series=\"total\")};d.prototype.isMeasurePlottedAsLine=function(b){if(\"MEASURE\"===this._item.type&&this._instanceData[b]){if(this._instanceData[b].plotAsLineNode)return this._instanceData[b].plotAsLineNode.querySelector(\"input\").checked;\nif(this._item.secondMeasureIsLine&&1===b)return!0}return!1};d.prototype.isMeasureOnSecondAxis=function(b){return\"MEASURE\"===this._item.type&&this.isMeasurePlottedAsLine(b)&&this._instanceData[b].plotOnSecondAxisNode?this._instanceData[b].plotOnSecondAxisNode.querySelector(\"input\").checked:!1};d.prototype._getChildLineItemsNodes=function(){return this._node.classList&&-1!==Array.prototype.slice.call(this._node.classList||[]).indexOf(\"config-config-item-line\")?[this._node]:Array.prototype.slice.call(this._node.children||\n[]).filter(function(b){return-1!==Array.prototype.slice.call(b.classList||[]).indexOf(\"config-config-item-line\")})};d.prototype.populate=function(b){var f={fields:[],title:\"\"},a=this._getChildLineItemsNodes()||[];Array.prototype.slice.apply(a).forEach(function(a,d){var c=this._populate(a.children[0],d);c&&(c.__hasError__&&(b.__hasError__=!0),this._item.ranges&&(c.range=this._item.ranges[d]),f.fields.push(c))},this);b[this._item.property]=f};d.prototype.name=function(){var b=\"DIMENSION\"===this._item.type?\n\"dimension\":\"measure\";return k.renderLabel(this._context,{section:\"EclairConfig\",id:b,fallback:b})};d.prototype.setAxisValue=function(b,f){var a=this._getChildLineItemsNodes()[b];(a=(a=a&&a.children[0])&&a.querySelector(\"select\"))&&this._instanceData[b]&&this._selectAxisDropdown(a,f,this._instanceData[b])};d.prototype.getAxesInUse=function(){return this._instanceData.reduce(function(b,f){void 0!==f.selectedColumn&&b.push(f.selectedColumn);return b},[])};d.prototype._getInputNode=function(b){return b.querySelector(\"select.config-axis-selector\")};\nd.prototype._handleDelete=function(){this._axisOrchestrator.remove(this)};d.prototype._afterRender=function(){this._axisOrchestrator.validateAxisTypes(this)};d.prototype.displayAsGroup=function(){return!0};d.prototype.incrementable=function(){var b=this._item.max||1,f=this._lineItems.length,a=this._axisOrchestrator.getMeasureCount(),e=this._axisOrchestrator.getDimensionCount();if(\"MEASURE\"===this._item.type)if(this._item.supportsLineForSecondMeasure&&2===f){if(this._instanceData[1].plotAsLineNode.querySelector(\"input\").checked||\n2===e)return!1}else{if(!isNaN(this._item.multidimensionalMax)&&1<this._axisOrchestrator.getDimensionCount()&&f>=this._item.multidimensionalMax)return!1}else if(\"DIMENSION\"===this._item.type&&(2<a||!isNaN(this._item.multimetricMax)&&1<a&&f>=this._item.multimetricMax))return!1;return f+1<=b};d.prototype.updateDynamicConfigInputs=function(b){if(\"MEASURE\"===this._item.type&&b.measure){this._context.isDisabled?this._optionalFieldControl.toggle(!1,!0):this._optionalFieldControl.toggle(this.incrementable(),\n!0);b=b.measure.fields;for(var f=b.length,a=this._axisOrchestrator.getDimensionCount(),e,d=0;d<f;d++){e=this._instanceData[d].plotAsLineNode;var c=this._instanceData[d].plotOnSecondAxisNode;if(this._item.supportsLineForSecondMeasure)if(1===d&&2===f){var h=e.querySelector(\"input\");h.disabled=!1;k.setNodeVisibility(e,!0);1<a&&(b[1].mark=\"line\",h.checked=!0,h.disabled=!0);k.setNodeVisibility(c,h.checked);e=c.querySelector(\"input\");h.checked||(e.checked=!1);this._context.isDisabled&&(e.disabled=!0)}else k.setNodeVisibility(e,\n!1),k.setNodeVisibility(c,!1);else this._item.secondMeasureIsLine&&(1===d&&2===f?(b[1].mark=\"line\",k.setNodeVisibility(c,!0),this._context.isDisabled&&(e=c.querySelector(\"input\"),e.disabled=!0)):k.setNodeVisibility(c,!1));this._item.colorable&&this._instanceData[d]&&k.setNodeVisibility(this._instanceData[d].colorPreview,2>a||\"line\"===b[d].mark)}}else\"DIMENSION\"===this._item.type&&b.dimension&&(this._context.isDisabled?this._optionalFieldControl.toggle(!1,!0):this._optionalFieldControl.toggle(this.incrementable(),\n!0))};d.prototype.populateCsfValidation=function(b){for(var d=0;d<b.errorForMeasure.length;d++){var a=b.errorForMeasure[d],e=_.findIndex(this._instanceData,{selectedColumn:a.axesColumn});a.errorMessage&&a.isCurrent&&-1<e?this.toggleAxisErrorMessage(e,a.errorMessage,!0):a.errorMessage?this.rerenderSelectOptionsForMeasure(!1,b,a.axesLabel,a.axesColumn):(-1<e&&this.toggleAxisErrorMessage(e,null,!1),this.rerenderSelectOptionsForMeasure(!0,b,a.axesLabel,a.axesColumn))}};return d});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.BooleanInput\",[\"js://reports.EclairConfigurerUtils.BaseInput\"],function(f){function a(a,c,d,e,b){f.call(this,a,c,d,e,b)}var g=0;a.prototype=Object.create(f.prototype);a.prototype.constructor=a;a.prototype.rendersOwnTitle=function(){return!0};a.prototype._render=function(a,c,d){c=d?d:document.createElement(\"div\");if(!1===this._context.isShowValuesVisible&&\"showValues\"===this._item.property||!1===this._context.isShowChatterPhotosVisible&&\n\"showChatterPhotos\"===this._item.property)return c.style.display=\"none\",c;d=\"ECLAIR_CHART_CONFIG_BOOLEAN_INPUT_\"+g++;var e=document.createElement(\"label\");e.className=\"config-boolean-selector-label label\";e.textContent=f.renderLabel(this._context,this._item.label);e.setAttribute(\"for\",d);var b=document.createElement(\"input\");b.className=\"config-boolean-selector\";b.type=\"checkbox\";b.id=d;this._context.isDisabled&&(b.disabled=!0);b.checked=void 0!==this._default?this._default:this._item.defaults&&this._item.defaults[a];\nb.onchange=this._handler;c.appendChild(b);c.appendChild(e);return c};a.prototype._populate=function(a){return!1===this._context.isShowChatterPhotosVisible&&\"showChatterPhotos\"===this._item.property?void 0:a?a.checked:a};return a});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.ColorInput\",[\"js://reports.EclairConfigurerUtils.BaseInput\",\"js://reports.EclairConfigurerUtils.buildColorSelector\"],function(c,g){function a(a,d,b,e,f){c.call(this,a,d,b,e,f)}a.prototype=Object.create(c.prototype);a.prototype.constructor=a;a.prototype._render=function(a,d){var b=document.createElement(\"input\");b.className=\"config-color-selector\";try{b.type=\"color\"}catch(e){b.type=\"text\"}b.value=void 0!==this._default?c.parseColor(this._default):\nthis._item.defaults&&c.parseColor(this._item.defaults[a])||c.DEFAULT_COLOR;b.onchange=this._handler;return b};a.prototype._populate=function(a){return a&&a.value||c.DEFAULT_COLOR};return a});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.EnumInput\",[\"js://reports.EclairConfigurerUtils.BaseInput\"],function(c){function a(d,a,b,g,e){c.call(this,d,a,b,g,e)}a.prototype=Object.create(c.prototype);a.prototype.constructor=a;a.prototype._render=function(d,a){var b=document.createElement(\"select\");b.className=\"config-enum-selector\";b.onchange=this._handler;b.selectedIndex=0;this._context.isDisabled&&\"numberUnits\"!==this._item.property&&(b.disabled=!0);this._item.options.forEach(function(a,\ne){var f=document.createElement(\"option\");f.text=c.renderLabel(this._context,a.label);f.value=a.value;b.appendChild(f);this._item.defaults&&this._item.defaults[d]===a.value&&(b.selectedIndex=e)},this);this._default&&c.selectDropdown(b,this._default);b.onchange=this._handler;return b};a.prototype._populate=function(a){if(!(!1===this._context.isDisplayUnitsVisible&&\"numberUnits\"===this._item.property||!1===this._context.isDecimalPlacesVisible&&\"decimalPlaces\"===this._item.property))return(a=a&&a.options&&\na.options[a.selectedIndex])&&a.value||this._item.options[0].value};a.prototype._getInputNode=function(a){return a.select(\"select.config-enum-selector\")};return a});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.GroupInput\",[\"js://reports.EclairConfigurerUtils.BaseInput\"],function(d){function a(a,c,b,e,f,g){this._globalDefaults=e;this._axisOrchestrator=g;d.call(this,a,c,b,e,f)}a.prototype=Object.create(d.prototype);a.prototype.constructor=a;a.prototype._render=function(a,c){var b=document.createElement(\"div\");b.className=\"config-group\";this._inputs=d.buildGroup(this._axes,this._handler,this._item.config,this._globalDefaults,b,this._context,\nthis._axisOrchestrator);return b};a.prototype.populate=function(a){(this._inputs||[]).forEach(function(c){c.populate(a)})};a.prototype.focus=function(){this._inputs&&this._inputs[0]&&this._inputs[0].focus};return a});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.IntegerInput\",[\"js://reports.EclairConfigurerUtils.BaseInput\"],function(d){function a(a,e,c,b,f){d.call(this,a,e,c,b,f)}a.prototype=Object.create(d.prototype);a.prototype.constructor=a;a.prototype._render=function(a,d){var c=document.createElement(\"input\");c.type=\"number\";c.className=\"config-integer\";c.value=void 0!==this._default?this._default:this._item.defaults?this._item.defaults[a]:1;c.onkeypress=function(b){var a;switch(b.key){case \"Backspace\":case \"Tab\":case \"Clear\":case \"End\":case \"Home\":case \"ArrowLeft\":case \"ArrowUp\":case \"ArrowRight\":case \"ArrowDown\":case \"Delete\":case \"Copy\":case \"Cut\":case \"EraseEof\":case \"Paste\":case \"Undo\":case \"Redo\":case \"Enter\":return!0}a=\nb.key&&\"Unidentified\"!==b.key?b.key.charCodeAt(0):b.charCode||b.keyCode||b.which;switch(a){case 8:case 9:case 12:case 13:case 35:case 36:case 37:case 38:case 39:case 40:return!0;case 46:if((b.key&&b.key.charCodeAt(0))!==(b.charCode||b.keyCode||b.which))return!0;default:return 48<=a&&57>=a||45===a}};c.onchange=this._handler;return c};a.prototype._populate=function(a){return a&&parseInt(a.value)||0};return a});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.RangeInput\",[\"js://reports.EclairConfigurerUtils.BaseInput\",\"js://reports.EclairConfigurerUtils.buildColorSelector\"],function(h,p){function e(a,d,b,c,g){this._rangeColors=[];this._rangePreviews=[];h.call(this,a,d,b,c,g)}function l(a,d){a.id=a.id||q+r++;var b=document.createElement(\"div\");b.className=\"config-input-range-value-wrapper\";b.appendChild(a);var c=document.createElement(\"label\");c.className=\"range-error-label errorMessage hidden\";\nc.setAttribute(\"for\",a.id);b.appendChild(c);c=document.createElement(\"label\");c.textContent=$A.get(\"$Label.EclairConfig.rangeBreakpointInput\").replace(\"{0}\",d);c.classList.add(\"assistive-text\");c.setAttribute(\"for\",a.id);b.appendChild(c);return b}function k(a){a=parseFloat(a.value);return 1E-130>a&&-1E-130<a?0:a}function m(){this._validateInputs();this._handler.apply(this)}var r=0,q=\"ECLAIR_CHART_CONFIG_RANGE_INPUT_\",s={section:\"EclairConfig\",id:\"invalidRange\",fallback:\"Invalid Range\"},t={section:\"EclairConfig\",\nid:\"tooLarge\",fallback:\"Enter a smaller number\"},u={section:\"EclairConfig\",id:\"tooSmall\",fallback:\"Enter a larger number\"},v={section:\"EclairConfig\",id:\"notANumber\",fallback:\"Not a number\"},n=[\"#C23934\",\"#FFB75D\",\"#00716B\"];e.prototype=Object.create(h.prototype);e.prototype.constructor=e;e.prototype._render=function(a,d,b,c){var g=document.createElement(\"input\");g.type=\"number\";g.step=\"any\";g.className=\"config-range-input-value\";var f=a;this._default&&this._default.breakpoints&&(this._item.extremas&&\nthis._default.extremas?f++:!this._item.extremas&&this._default.extremas&&f++);g.value=void 0!==(this._default&&this._default.breakpoints&&this._default.breakpoints[f])?this._default.breakpoints[f]:Math.round(100*(a+1)/d);g.onchange=m.bind(this);a<d-1&&b.appendChild(l(g,a));if(c){var e=this;d=this._default&&this._default.bands&&this._default.bands[a];this._rangeColors[a]=d&&h.parseColor(d.color)||this._item.defaultColors&&this._item.defaultColors[a]||n[a];this._rangePreviews[a]=p(this._rangeColors[a],\nthis._context.colors,c,function(b){e._rangeColors[a]=b;e._handler()})}};e.prototype._renderExtrema=function(a,d){var b=\"min\"===a?0:100,c=document.createElement(\"input\");c.type=\"number\";c.step=\"any\";c.className=\"config-range-input-extrema config-range-input-\"+a;c.value=this._default&&this._default.extremas&&this._default.breakpoints&&void 0!==this._default.breakpoints[d]?this._default.breakpoints[d]:this._default&&this._default.breakpoints?\"min\"===a?this._default.breakpoints[0]<=b?this._default.breakpoints[0]-\n1:b:this._default.breakpoints[this._default.breakpoints.length-1]>=b?this._default.breakpoints[this._default.breakpoints.length-1]+1:b:b;c.onchange=m.bind(this);return l(c,d)};e.prototype.render=function(a){var d=this._item.min||1,b=0,c,g,f,e;c=document.createElement(\"fieldset\");c.className=\"config-input \"+(this._item.extremas?\" config-range-with-extremas\":\" config-range-no-extremas\");g=document.createElement(\"div\");g.className=\"config-input config-layout-flex\";b=document.createElement(\"legend\");\nb.textContent=$A.get(\"$Label.EclairConfig.segmentRanges\");b.classList.add(\"label\");b.classList.add(\"item-title\");c.appendChild(b);f=document.createElement(\"div\");f.className=\"config-input-range-container\";g.appendChild(f);this._item.colorable&&(e=document.createElement(\"div\"),e.className=\"config-input-range-color-container\",g.appendChild(e));this._item.extremas&&f.appendChild(this._renderExtrema(\"min\",0));for(b=0;b<d;b++)this._render(b,d,f,e);this._item.extremas&&f.appendChild(this._renderExtrema(\"max\",\nd));this._childCount=this._item.min;this._node=c;c.appendChild(g);a.appendChild(c);this._validateInputs()};e.prototype.populate=function(a){var d={breakpoints:[],bands:[],extremas:this._item.extremas},b=this._item.extremas&&this._node.querySelector(\".config-range-input-min\"),c=this._item.extremas&&this._node.querySelector(\".config-range-input-max\"),e=this._node.querySelectorAll(\".config-range-input-value\");b&&d.breakpoints.push(b.value&&k(b));var f;for(f=0;f<e.length;f++)d.breakpoints.push(e[f].value&&\nk(e[f]));this._rangeColors.forEach(function(a,b){d.bands[b]=d.bands[b]||{};d.bands[b].color=a||n[b]});b&&d.breakpoints.push(c.value&&k(c));a[this._item.property]=d};e.prototype.focus=function(){var a=this._item.extremas&&this._node.querySelector(\".config-range-input-min\")||this._node.querySelector(\".config-range-input-value\");a&&a.focus()};e.prototype._validateInputs=function(){var a=[];this._item.extremas&&a.push(this._node.querySelector(\".config-range-input-min\"));Array.prototype.push.apply(a,this._node.querySelectorAll(\".config-range-input-value\"));\nthis._item.extremas&&a.push(this._node.querySelector(\".config-range-input-max\"));this._hasError=!1;a.forEach(function(d,b){var c=k(d);this._toggleError(d,this._getValueError(c)||b&&c<=k(a[b-1])&&h.renderLabel(this._context,s))},this)};e.prototype._toggleError=function(a,d){d?(this._hasError=!0,a.classList.add(\"error\"),a.nextSibling.classList.remove(\"hidden\"),a.nextSibling.innerHTML=d):(a.classList.remove(\"error\"),a.nextSibling.classList.add(\"hidden\"),a.nextSibling.innerHTML=\"\")};e.prototype._getValueError=\nfunction(a){return(isNaN(a)||!isFinite(a))&&h.renderLabel(this._context,v)||1E126<a&&h.renderLabel(this._context,t)||-1E126>a&&h.renderLabel(this._context,u)};return e});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.TextInput\",[\"js://reports.EclairConfigurerUtils.BaseInput\"],function(c){function a(a,d,b,e,f){c.call(this,a,d,b,e,f)}a.prototype=Object.create(c.prototype);a.prototype.constructor=a;a.prototype._render=function(a,c){var b=document.createElement(\"input\");b.type=\"text\";b.className=\"config-string\";void 0!==this._item.maxLength&&null!==this._item.maxLength&&(b.maxLength=this._item.maxLength);b.value=void 0!==this._default?this._default:\nthis._item.defaults?this._item.defaults[a]:1;b.onblur=this._handler;return b};a.prototype._populate=function(a){return a&&a.value||\"\"};return a});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.OrInput\",[\"js://reports.EclairConfigurerUtils.BaseInput\"],function(d){function e(a,b){return a.property&&void 0!==b[a.property]?!0:\"OR\"===a.type||\"GROUP\"===a.type?a.config.some(function(a){return e(a,b)}):!1}function b(a,b,c,f,g,h){this._globalDefaults=f;this._configArea=this._select=null;this._axisOrchestrator=h;d.call(this,a,b,c,f,g)}b.prototype=Object.create(d.prototype);b.prototype.constructor=b;b.prototype._selectOption=\nfunction(a){this._inputs=d.buildGroup(this._axes,this._handler,[a],this._globalDefaults,this._configArea,this._context,this._axisOrchestrator)};b.prototype._render=function(a,b,c){a=document.createElement(\"div\");a.className=\"config-or-container\";this._select=document.createElement(\"select\");this._select.className=\"config-or-selector\";this._select.id=c;this._configArea=document.createElement(\"div\");this._configArea.className=\"config-or-config-area\";this._context.isDisabled&&(this._select.disabled=\n!0);a.appendChild(this._select);a.appendChild(this._configArea);this._item.nullable&&(c=document.createElement(\"option\"),c.textContent=d.renderLabel(this._context,{section:\"EclairConfig\",id:\"none\",fallback:\"None\"}),c.value=\"NONE\",this._select.appendChild(c));this._item.config.forEach(function(a,b){var c=document.createElement(\"option\");c.textContent=d.renderLabel(this._context,a.label);c.value=b;this._select.appendChild(c);if(e(a,this._globalDefaults||{}))this._select.selectedIndex=b+(this._item.nullable?\n1:0),this._selectOption(a)},this);this._select.onchange=function(){this._inputs&&this._inputs.length&&this._inputs.forEach(function(a){a._handleDelete()});this._inputs=[];for(var a=this._select&&this._select.options&&this._select.options[this._select.selectedIndex];this._configArea.firstChild;)d.removeNode(this._configArea.firstChild);a&&\"NONE\"!==a.value&&(a=this._item.config[parseInt(a.value,10)],this._selectOption(a));this._handler()}.bind(this);return a};b.prototype.populate=function(a){(this._inputs||\n[]).forEach(function(b){b.populate(a)})};b.prototype._getInputNode=function(a){return a.querySelector(\"select.config-or-selector\")};return b});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.AxisOrchestrator\",[],function(){function c(a){this._measureWidgets=[];this._dimensionWidgets=[];this._axes=a}var m={section:\"EclairConfig\",id:\"measureTypeMismatchError\",fallback:\"Warning: summary mismatch. Chart cannot be saved.\"},n={section:\"EclairConfig\",id:\"measureTypeMismatchErrorVBarLine\",fallback:\"Warning: summary mismatch. Chart cannot be saved.\"};c.prototype.add=function(a){\"MEASURE\"===a.item().type?this._measureWidgets.push(a):\nthis._dimensionWidgets.push(a)};c.prototype.remove=function(a){\"MEASURE\"===a.item().type?this._measureWidgets.splice(this._measureWidgets.indexOf(a),1):this._dimensionWidgets.splice(this._dimensionWidgets.indexOf(a),1)};c.prototype.validateAxisTypes=function(a){if(\"MEASURE\"===a.item().type){var h=this._measureWidgets.reduce(function(a,b){var d=b.getAxesInUse();\"SECONDARY\"!==b.item().role?(a.primary={widget:b,axis:d&&d[0],index:0,isOnSecondAxis:b.isMeasureOnSecondAxis(0)},d.slice(1).forEach(function(d,\nf){a.auxiliary.push({widget:b,axis:d,index:f+1,isOnSecondAxis:b.isMeasureOnSecondAxis(f+1)})})):d.forEach(function(d,f){a.auxiliary.push({widget:b,axis:d,index:f,isOnSecondAxis:b.isMeasureOnSecondAxis(f)})});return a},{auxiliary:[],primary:null}),c=this._axes.measures.reduce(function(a,b){var d=b.type.toLowerCase(),e=b.column.replace(/_value$/,\"\"),d=\"RowCount\"===e.split(\"#\").pop()?\"NUMBER\":\"int\"===d||\"double\"===d?\"NUMBER\":d;a[b.column]=d;return a},{});h.auxiliary.forEach(function(a){var b=c[a.axis],\nd=a.isOnSecondAxis,e=c[h.primary.axis],f=h.primary.isOnSecondAxis,b=b===e||\"ANY\"===b||\"ANY\"===e||f!==d,e=a.widget,d=e.isMeasurePlottedAsLine(1)&&!isNaN(e._item.multidimensionalMax)&&2===e._item.multidimensionalMax?n:m;e.toggleAxisErrorMessage(a.index,d,!b)})}};c.prototype.getAvailableColumns=function(a){var c=\"MEASURE\"===a.item().type,k=c?this._measureWidgets:this._dimensionWidgets,g=c?this._axes.measures:this._axes.dimensions,b=g.reduce(function(a,b,c){a[b.column]=c;return a},{});(!c||!a.context().allowDupMeasures)&&\nk.forEach(function(a){(a.getAxesInUse()||[]).forEach(function(a){void 0!==b[a]&&delete b[a]})});return Object.keys(b).length?Object.keys(b).sort(function(a,c){return b[a]-b[c]}):[g[0]&&g[0].column]};c.prototype.handleChange=function(a,c,k,g){var b=\"MEASURE\"===a.item().type;if(!b||!a.context().allowDupMeasures)(b?this._measureWidgets:this._dimensionWidgets).forEach(function(b){var e={};b.populate(e);(e[b.item().property]&&e[b.item().property].fields||[]).forEach(function(e,l){b===a&&l===c||e&&(e.column&&\ne.column===k)&&b.setAxisValue(l,g)})})};c.prototype.getDimensionCount=function(){return this._getLineItemCount(this._dimensionWidgets)};c.prototype.getMeasureCount=function(){return this._getLineItemCount(this._measureWidgets)};c.prototype._getLineItemCount=function(a){return a.reduce(function(a,c){return a+c._lineItems.length},0)};return c});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.ConfigHelpers\",[\"js://reports.services.TableChartConfigService\",\"js://reports.services.ReportResultTransformService\",\"js://reports.services.FlexibleTableChartConfigService\"],function(z,u,A){function q(a,b){return a.reduce(function(a,g){var d=g[g.length-1];b[d.property]&&a.push(b[d.property]);return a},[])}function r(a,b,c){c=[].concat(c);a.forEach(function(a){var d=a[a.length-1],n,e;c.some(function(a,b){return a.fields&&a.fields.length>=\nd.min?(n=a,e=b,!0):!1});c.length&&n&&(b[d.property]=n,n.fields.length=Math.min(n.fields.length,d.max),c.splice(e,1))})}function s(a,b,c){c=c||{primaryDimensions:[],primaryMeasures:[],secondaryDimensions:[],secondaryMeasures:[]};b=b||[{config:a}];a.forEach(function(a,d){\"OR\"===a.type||\"GROUP\"===a.type?s(a.config,b.concat([a]),c):\"DIMENSION\"===a.type?c[\"SECONDARY\"===a.role?\"secondaryDimensions\":\"primaryDimensions\"].push(b.concat([a])):\"MEASURE\"===a.type&&c[\"SECONDARY\"===a.role?\"secondaryMeasures\":\"primaryMeasures\"].push(b.concat([a]))});\nreturn c}function B(a,b,c){var g=[];a.forEach(function(a){a=a[a.length-1];b[a.property]&&b[a.property].fields&&Array.prototype.push.apply(g,b[a.property].fields.map(function(a){return a.column}))});var d=c.filter(function(a){return!g.some(function(b){return w(b)===w(a.column)})});0!==d.length&&a.forEach(function(a){var c=a[a.length-1];a=a[a.length-2];if(\"OR\"===a.type&&1<a.config.length)for(var f=0;f<a.config.length;f++){var g=a.config[f];if(g.property!==c.property&&b[g.property])return}b[c.property]||\n(b[c.property]={fields:[]});for(a=b[c.property].fields;a.length<c.max&&0<d.length;)f=d.splice(0,1)[0],a.push({column:f.column,label:f.label})})}function p(a){var b=a[a.length-1],c=a[a.length-2];b&&c&&(c.config.splice(c.config.indexOf(b),1),0===c.config.length&&2<=a.length&&p(a.slice(0,a.length-1)))}function m(a,b,c,g){a[b].forEach(function(a){var b=a[a.length-1];\"min\"===g?c<b.min?p(a):c=Math.max(c-b.min,0):(a=b.max-b.min,c<b.max&&(b.max=Math.max(c,b.min)),c=Math.max(c-a,0))});return c}function C(a){return\"grouping\"===\na.columnType?!1:\"aggregate\"===a.columnType||D[a.dataType]}function E(a){return\"grouping\"===a.columnType}function t(a){var b={dimensions:0,measures:0};a.measure&&(b.measures+=a.measure.fields.length);a.extraMeasure&&b.measures++;a.x&&b.measures++;a.y&&b.measures++;a.dimension&&(b.dimensions+=a.dimension.fields.length);a.extraDimension&&b.dimensions++;a.color&&(a.color.fields&&1<=a.color.fields.length)&&b.dimensions++;return b}function v(a,b){return\"sfdc/charts/table.js\"===b?z.getConfigScript():\"sfdc/charts/flexTable.js\"===\nb?A.getConfigScript():a.script(b)}function w(a){if(a.match(x))return a.replace(x,\"\");if(a.match(y))return a.replace(y,\"\")}function F(a,b){var c=t(a),c=2>=c.measures+c.dimensions;return\"sfdc-lightning/charts/donut.js\"===b||\"sfdc-lightning/charts/funnel.js\"===b?!1:\"sfdc-lightning/charts/scatter.js\"===b?!a.color:!a.color&&c}var y=RegExp(u.VALUE_SUFFIX+\"$\"),x=RegExp(u.LABEL_SUFFIX+\"$\"),D={\"boolean\":!0,\"int\":!0,\"double\":!0,currency:!0,percent:!0};return{pruneUnselectableAxes:function(a,b,c){a=JSON.parse(JSON.stringify(a));\nvar g=s(a.config);if(b&&b.dimensions){var d=b.dimensions.length,d=m(g,\"primaryDimensions\",d,\"min\");m(g,\"secondaryDimensions\",d,\"min\");d=b.dimensions.length;d=m(g,\"primaryDimensions\",d,\"max\");m(g,\"secondaryDimensions\",d,\"max\")}!0!==c&&(b&&b.measures)&&(c=b.measures.length,c=m(g,\"primaryMeasures\",c,\"min\"),m(g,\"secondaryMeasures\",c,\"min\"),c=b.measures.length,c=m(g,\"primaryMeasures\",c,\"max\"),m(g,\"secondaryMeasures\",c,\"max\"));return a},mapConfigsToNewDefinition:function(a,b,c,g,d,n){var e=v(a,b).metadata().config;\na=v(a,g).metadata().config;var f=s(e),e=s(a);a=q(f.primaryMeasures,c);var l=q(f.secondaryMeasures,c),h=q(f.primaryDimensions,c),m=q(f.secondaryDimensions,c),p={},k={};r(e.primaryMeasures,k,a);r(e.secondaryMeasures,k,l);r(e.primaryDimensions,k,h);r(e.secondaryDimensions,k,m);if(f.primaryMeasures.length&&f.primaryMeasures[0][1].secondMeasureIsLine)var u=!0;(d&&d.dimensions&&1>=t(k).measures||u)&&B(e.primaryDimensions.concat(e.secondaryDimensions),k,d.dimensions);d=0<e.primaryMeasures.length&&e.primaryMeasures[0][1].multidimensionalMax;\n!isNaN(d)&&(1<t(k).dimensions&&k.measure&&k.measure.fields.length>d)&&(k.measure.fields.length=d);Object.keys(f).forEach(function(a){f[a].forEach(function(a){p[a[a.length-1].property]=!0})});Object.keys(c).forEach(function(a){p[a]||(k[a]=c[a])});this.mapRowLimitToNewDefinition(b,g,k,c.__rowLimit__,n);return k},mapRowLimitToNewDefinition:function(a,b,c,g,d){!c.__rowLimit__&&g&&(c.__rowLimit__=g);d||((\"sfdc-lightning/charts/donut.js\"===a||\"sfdc-lightning/charts/funnel.js\"===a)&&!(\"sfdc-lightning/charts/donut.js\"===\nb||\"sfdc-lightning/charts/funnel.js\"===b)?6===c.__rowLimit__&&(c.__rowLimit__=100):!(\"sfdc-lightning/charts/donut.js\"===a||\"sfdc-lightning/charts/funnel.js\"===a)&&(\"sfdc-lightning/charts/donut.js\"===b||\"sfdc-lightning/charts/funnel.js\"===b)&&100===c.__rowLimit__&&(c.__rowLimit__=6));return c},findAxisTraces:s,updateDynamicConfigInputs:function(a,b,c,g){var d=t(b);c.forEach(function(c){var e=c.node();if(e){var f=[];switch(c.item().property){case \"axisRangeOption\":e.firstElementChild&&(f.push({node:e.firstElementChild.firstElementChild}),\nf.push({node:e.nextElementSibling,toHide:\"manual\"!==b.axisRangeOption}));break;case \"numberUnits\":f.push({node:e.lastElementChild});break;case \"showSubTotal\":if(\"sfdc/charts/flexTable.js\"===a){var l=1<(0<b.columns.length?b.columns:b.columns&&b.columns.fields||[]).filter(E).length;f.push({node:e,toHide:!l})}break;case \"hasConditionalHighlighting\":if(\"sfdc/charts/table.js\"===a)f.push({node:e.nextElementSibling,toHide:!b.hasConditionalHighlighting});else if(\"sfdc/charts/flexTable.js\"===a){var l=-1<(0<\nb.columns.length?b.columns:b.columns&&b.columns.fields||[]).findIndex(C),h=!b.hasConditionalHighlighting||!l;f.push({node:e.firstElementChild,toDisable:!l});f.push({node:e.nextElementSibling,toHide:h});f.push({node:e.nextElementSibling.nextElementSibling,toHide:h})}break;case \"legendPosition\":f.push({node:e,toHide:F(b,a)});break;case \"normalize\":\"sfdc-lightning/charts/stackvbar.js\"===a&&f.push({node:e,toHide:1<d.measures});break;case \"showChatterPhotos\":\"sfdc-lightning/charts/hbar.js\"===a&&(b.dimension&&\nb.dimension.fields)&&f.push({node:e.firstElementChild,toDisable:1<b.dimension.fields.length});break;case \"showRange\":(\"sfdc-lightning/charts/gauge.js\"===a||\"sfdc-lightning/charts/metric.js\"===a)&&f.push({node:e.nextElementSibling,toDisable:!1});break;case \"showValues\":\"sfdc-lightning/charts/line.js\"===a&&f.push({node:e.firstElementChild,toDisable:1<d.dimensions||1<d.measures});break;case \"__primarySort__\":case \"__secondarySort__\":c.updateDynamicSortConfigInputs(a,b,d,g);break;case \"measure\":case \"x\":case \"y\":null!=\nb.errorForMeasure&&0<b.errorForMeasure.length&&c.populateCsfValidation(b)}for(e=0;e<f.length;e++){l=f[e];if(l.hasOwnProperty(\"toHide\")&&(h=l.node))l.toHide?h.style.display=\"none\":h.style.removeProperty(\"display\");if(h=l.node)g||l.toDisable?(h.checked&&h.click(),h.disabled=!0,h.style.filter=\"grayscale()\"):(h.disabled=!1,h.style.filter=\"none\")}c.updateDynamicConfigInputs&&(\"sfdc-lightning/charts/vbar.js\"===a||\"sfdc-lightning/charts/hbar.js\"===a||\"sfdc-lightning/charts/line.js\"===a||\"sfdc-lightning/charts/stackvbar.js\"===\na)&&c.updateDynamicConfigInputs(b)}})},getConfigScript:v,getAxisCounts:t,\"@test\":{extractCorrespondingAxesFromTrace:q,assignCorrespondingAxisToConfig:r,removeConfigItem:p,pruneIndividualAxis:m}}});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.buildConfig\",\"js://reports.EclairConfigurerUtils.BaseInput js://reports.EclairConfigurerUtils.AxisInput js://reports.EclairConfigurerUtils.ColorInput js://reports.EclairConfigurerUtils.IntegerInput js://reports.EclairConfigurerUtils.RangeInput js://reports.EclairConfigurerUtils.TextInput js://reports.EclairConfigurerUtils.BooleanInput js://reports.EclairConfigurerUtils.EnumInput js://reports.EclairConfigurerUtils.GroupInput js://reports.EclairConfigurerUtils.OrInput js://reports.EclairConfigurerUtils.AxisOrchestrator js://reports.EclairConfigurerUtils.ColumnInput js://reports.EclairConfigurerUtils.RadioInput js://reports.EclairConfigurerUtils.AxisRangeInput\".split(\" \"),\nfunction(l,p,q,r,s,t,u,v,w,x,y,n,z,A){var B=function(b,e,l,f,m,c,k,h){for(;m.firstChild;)m.removeChild(m.firstChild);k=k||new y(b);h=h||{};return l.map(function(d,l){var a=null,g=d.type.toUpperCase();\"DIMENSION\"===g||\"MEASURE\"===g?(a=h.localeConfig&&h.localeConfig.getLocaleConfig(),c.decimalSeparator=a&&null!=a.localeNumberDecimalSeparator?a.localeNumberDecimalSeparator:\".\",a=new p(c,d,e,f,b,k),k.add(a)):\"COLOR\"===g?a=new q(c,d,e,f,b):\"INTEGER\"===g?a=new r(c,d,e,f,b):\"RANGE\"===g?a=new s(c,d,e,f,b):\n\"AXISRANGE\"===g?a=new A(c,d,e,f,b):\"TEXT\"===g?a=new t(c,d,e,f,b):\"BOOLEAN\"===g?a=new u(c,d,e,f,b):\"ENUM\"===g?a=new v(c,d,e,f,b):\"GROUP\"===g?a=new w(c,d,e,f,b,k):\"OR\"===g?a=new x(c,d,e,f,b,k):\"COLUMN\"===g?a=new n(c,d,e,f,b):\"COLUMNLIST\"===g?a=h.columnSelector?new h.columnSelector(c,d,e,f,b):new n(c,d,e,f,b):\"RADIO\"===g?a=new z(c,d,e,f,b):\"SORT\"===g&&h.sortRenderer&&(a=new h.sortRenderer(c,d,e,f,b));null!=a&&a.render(m);return a},this)};return l.buildGroup=B});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.buildChartSelector\",[],function(){function t(c){if(c=(/([^\\/]{0,}).js/.exec(c)||[])[1])return\"/projRes/analytics-platform/img/eclairNG/chartIcons/\"+c+\"1.png\"}return function(c,u,n,v,p,q,r,w,x){if(c){for(;c.firstChild;)c.removeChild(c.firstChild);var f=document.createElement(\"fieldset\");f.className=\"config-input config-input-chartselector\";var e=document.createElement(\"legend\");e.textContent=$A.get(\"$Label.EclairConfig.chartSelectorTitle\");\ne.classList.add(\"chart-selector-title\");f.appendChild(e);var l;u.forEach(function(e,s){var g=e.script,d=e.effectiveMetadata;if(d&&Object.keys(d).length&&d.config&&d.config.length){var a=document.createElement(\"input\");a.type=\"radio\";a.name=\"analytics-eclair-configurer-utils-chart-selector-radio\";var b=!e.enabled||x;a.className=\"chart-picker-radio\"+(b?\" disabled\":\"\");a.disabled=b;a.id=\"analytics-eclair-configurer-utils-chart-selector-radio-\"+s;a.dataset.path=g.path();a.onfocus=function(){var b=c.querySelector(\"input:checked\");\nb&&b!==a&&b.focus()};b=document.createElement(\"label\");b.className=\"chart-picker-label\";b.setAttribute(\"for\",a.id);var k=t(g.path());if(k){var h=p(d.name);if(r)k=(/([^\\/]{0,}).js/.exec(g.path())||[])[1],r(b,k,h);else{var m=document.createElement(\"div\");m.title=h;m.style.backgroundImage=\"url('\"+k+\"')\";b.appendChild(m)}}else h=document.createElement(\"span\"),h.textContent=p(d.shortname),b.appendChild(h);a.onchange=function(){a.checked&&(a.focus(),q(g,d,null,!1))};n&&a.dataset.path===n&&(a.checked=!0,\nq(g,d,v,!0));0===s&&(l=a);f.appendChild(a);f.appendChild(b)}});c.appendChild(f);w&&l&&l.focus()}}});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.referenceLineHelper\",[\"js://reports.EclairConfigurerUtils.buildColorSelector\",\"js://reports.EclairConfigurerUtils.OptionalFieldControl\"],function(p){var n=0,q=function(d){d=d.target;var a=parseFloat(d.value);!isNaN(a)&&isFinite(a)&&1E125>=a&&-1E125<=a?d.classList.remove(\"inputError\"):d.classList.add(\"inputError\")};return{render:function(d,a,f,b){a=a&&a.referenceLines&&a.referenceLines.length&&a.referenceLines[0];var g=document.createElement(\"div\");\ng.classList.add(\"config-axis-reference-line\");var e=document.createElement(\"input\");e.className=\"config-axis-reference-line-checkbox\";e.type=\"checkbox\";e.checked=!!a;e.value=\"includeReferenceLines\";e.onchange=b;e.id=\"ECLAIR_CHART_REFERENCELINE_INPUT_\"+n++;g.appendChild(e);var c=document.createElement(\"label\");c.classList.add(\"label\");c.textContent=$A.get(\"$Label.EclairConfig.showReferenceLine\");c.setAttribute(\"for\",e.id);g.appendChild(c);c=document.createElement(\"input\");c.type=\"number\";c.step=\"any\";\nc.className=\"config-axis-reference-line-valueInput\";c.value=a&&a.value||\"0\";c.oninput=q;c.onchange=b;c.id=\"ECLAIR_CHART_REFERENCELINE_INPUT_\"+n++;var h=document.createElement(\"label\");h.classList.add(\"label\");h.textContent=$A.get(\"$Label.EclairConfig.referenceLineValue\");h.setAttribute(\"for\",c.id);var k=document.createElement(\"div\");k.className=\"config-axis-reference-line-innerValueInputDiv\";k.appendChild(c);var l=document.createElement(\"div\");l.className=\"config-axis-reference-line-outerValueInputDiv\";\nl.appendChild(h);l.appendChild(k);var m=a&&a.color||f[0].color;p(m,f,k,function(a){m=a;b()});g.appendChild(l);d.appendChild(g);return{checkbox:e,valueEdit:c,getColor:function(){return m}}},populate:function(d,a){var f;if(a.checkbox.checked){f=a.getColor()||\"#f00\";var b=a.valueEdit.value||0,b=parseFloat(b);isNaN(b)?b=0:1E125<b?b=1E125:-1E125>b?b=-1E125:1E-128>b&&-1E-128<b&&(b=0);f=[{color:f,value:b}]}else f=[];d.referenceLines=f}}});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.ColumnInput\",[\"js://reports.EclairConfigurerUtils.BaseInput\"],function(g){function b(a,e,d,c,f){g.call(this,a,e,d,c,f)}var l={\"boolean\":!0,\"int\":!0,\"double\":!0,currency:!0,percent:!0};b.prototype=Object.create(g.prototype);b.prototype.constructor=b;b.prototype.rendersOwnTitle=function(){return!1};b.prototype._render=function(a,e,d){e=this._item.type;var c=this._item.property,f=document.createElement(\"div\"),b;f.className=\"config-axis-container\";\n\"columns\"===c?(b=this._getAvailableColumns(),c=this._default&&this._default[a]&&this._default[a].column):\"highlightColumn\"===c?(b=this._getConfiguredColumns(!0),c=this._default&&this._default.column||b&&0<b.length&&b[0].column):(b=this._getConfiguredColumns(),c=this._default&&this._default.column);var c=c&&c+\"_label\",h={};this._instanceData[a]=h;var k=document.createElement(\"select\");k.className=\"config-axis-selector \"+e.toLowerCase();(b||[]).forEach(function(a,d){var c=document.createElement(\"option\");\nc.textContent=a.label;c.value=a.column;k.appendChild(c)});b&&b.length&&this._selectAxisDropdown(k,c||b[0].column,h);k.onchange=function(a){h.selectedColumn=k.options[k.selectedIndex].value;this._afterRender();this._handler()}.bind(this);f.appendChild(k);d&&d.appendChild(f);return f};b.prototype._parseColumn=function(a){a=a.split(\"!\");return a[a.length-1]};b.prototype._validAggregateColumn=function(a){return\"RowCount\"===a.column?!!a.renderRowCount:a.column.startsWith(\"FORMULA\")?!0:a.column===this._parseColumn(a.column)?\n!1:!0};b.prototype._isFirstGroupingColumn=function(a){for(var e=this._default.selectedColumns,d=0;d<e.length;d++){var c=e[d];if(\"grouping\"===c.columnType)return c.column===a.column}return!1};b.prototype._canUseFormulaForSortAggregate=function(){for(var a=this._default.selectedColumns,e=0,d=0;d<a.length;d++)\"grouping\"===a[d].columnType&&e++;return 1===e};b.prototype._isValidRowCount=function(a){return\"RowCount\"===a.column?!!a.renderRowCount:!0};b.prototype._isNumericalColumn=function(a){return\"grouping\"===\na.columnType?!1:\"aggregate\"===a.columnType||l[a.dataType]};b.prototype._getConfiguredColumns=function(a){var e=this._default&&this._default.selectedColumns;if(e){for(var d=[],c=0;c<e.length;c+=1){var f=e[c];if(\"aggregate\"!==f.columnType||this._validAggregateColumn(f))\"sortingColumn\"===this._item.property&&(\"grouping\"===f.columnType&&!this._isFirstGroupingColumn(f)||f.column.startsWith(\"FORMULA\")&&!this._canUseFormulaForSortAggregate())||(!a||this._isNumericalColumn(f))&&d.push({column:f.column+\"_label\",\nlabel:f.label})}return d}return[this._axes.columns[0]]};b.prototype._afterRender=function(){var a=this._node&&this._node.nextElementSibling.querySelector(\"select\"),e=this._validateData();a&&e&&this._repopulateOptions(a,this._getConfiguredColumns())};b.prototype._validateData=function(){for(var a={},e,d=g.renderLabel(this._context,{section:\"FlexTableService\",id:\"uniqueColumnValidation\"}),c=0;c<this._instanceData.length;c+=1){e=this._instanceData[c].selectedColumn;if(a[e])return this.toggleAxisErrorMessage(c,\nd,!0),!1;this.toggleAxisErrorMessage(c,d,!1);a[e]=!0}return!0};b.prototype._repopulateOptions=function(a,e){for(var d=a.value,c=!1;a.firstChild;)a.removeChild(a.firstChild);(e||[]).forEach(function(e,b){var h=document.createElement(\"option\");h.textContent=e.label;h.value=e.column;a.appendChild(h);d===e.column&&(c=!0)});e&&e.length&&(a.value=c?d:e[0].column)};b.prototype._getAvailableColumns=function(){for(var a=this._axes.columns,e=[],d,c=this._getAxesInUse(),b=0;b<a.length;b+=1)d=a[b].column,void 0===\nc[d]&&e.push(a[b]);return e};b.prototype._getSelectedColumns=function(){var a=this._axes.columns,e=[],d,c=this._getAxesInUse();if(0===Object.keys(c).length)return[a[0]];for(var b=0;b<a.length;b+=1)d=a[b].column,(void 0!==c[d]||void 0!==c[d+\"_label\"])&&e.push(a[b]);return e};b.prototype._getAxesInUse=function(){for(var a={},e=0;e<this._instanceData.length;e+=1)a[this._instanceData[e].selectedColumn]=e;return a};b.prototype.populate=function(a){var e={fields:[],title:\"\"},b=this._getChildLineItemsNodes()||\n[];Array.prototype.slice.apply(b).forEach(function(c,b){var d=this._populate(c,b);void 0!==d&&(d.__hasError__?a.__hasError__=!0:e.fields.push(d))},this);a[this._item.property]=e};b.prototype._populate=function(a,b){var d=a.querySelector(\"select\");if(d){var c=d.options[d.selectedIndex],f=c&&c.value,g={},c=this._axes.columns,h=this._instanceData[b];if(h&&h.hasError)return g.__hasError__=!0,g;if(\"sortingColumn\"===this._item.property)return this._instanceData=[{selectedColumn:f+\"_label\"}],this._repopulateOptions(d,\nthis._getConfiguredColumns()),this._getColumnConfig(this._default.selectedColumns,d.value);if(\"highlightColumn\"===this._item.property){this._instanceData=[{selectedColumn:f+\"_label\"}];this._repopulateOptions(d,this._getConfiguredColumns(!0));d=this._default&&this._default.selectedColumns&&this._default.selectedColumns.filter(this._isNumericalColumn)||[];if(!d)return g;d=d.filter(this._isValidRowCount);return this._getColumnConfig(d,f)}c.some(function(a){return a.column===f?(g=JSON.parse(JSON.stringify(a)),\n!0):!1});return g}};b.prototype._getColumnConfig=function(a,b){if(a&&a.length){for(var d=0;d<a.length;d+=1){var c=a[d];if(c.column+\"_label\"===b&&(\"aggregate\"!==c.columnType||this._validAggregateColumn(c)))return{column:c.column,label:c.label,type:c.dataType}}return{column:a[0].column,label:a[0].label,type:a[0].dataType}}};b.prototype._getChildLineItemsNodes=function(){return this._node.className&&-1!==Array.prototype.slice.call(this._node.classList||[]).indexOf(\"config-config-item-line\")?[this._node]:\nArray.prototype.slice.call(this._node.children||[]).filter(function(a){return-1!==Array.prototype.slice.call(a.classList||[]).indexOf(\"config-config-item-line\")})};b.prototype._selectAxisDropdown=function(a,b,d){g.selectDropdown(a,b);d.selectedColumn=b};b.prototype.name=function(){return g.renderLabel(this._context,{section:\"EclairConfig\",id:\"column\",fallback:\"Column\"})};b.prototype.numChildren=function(){return Math.max(g.prototype.numChildren.call(this),this._default&&this._default.length||0)};\nreturn b});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.RadioInput\",[\"js://reports.EclairConfigurerUtils.BaseInput\"],function(h){function a(g,b,c,d,e){h.call(this,g,b,c,d,e)}a.prototype=Object.create(h.prototype);a.prototype.constructor=a;a.prototype._render=function(g,b,c){g=this._item.property;b=this._item.options;var d=this._default||this._getDefaultOptionValue(b),e=this._item.legend,a=this._item.property,k=document.createElement(\"div\");if(!1===this._context.isAxisRangeVisible&&\n\"axisRangeOption\"===a)return k.style.display=\"none\",k;k.className=\"config-radio-container \"+g;var m=document.createElement(\"fieldSet\"),f=document.createElement(\"legend\");f.textContent=h.renderLabel(this._context,e);\"axisRangeOption\"!==a&&(f.className=\"slds-assistive-text\");m.appendChild(f);this._item.label&&\"axisRangeOption\"!==a&&(e=h.renderLabel(this._context,this._item.label),m.appendChild(this._createRadioButtonLabel(e,\"label-\"+g)));for(e=0;e<b.length;e+=1){f=\"radio-button-\"+g+\"-\"+e;a=document.createElement(\"span\");\na.className=\"radio-button-container\";var l=b[e],p=h.renderLabel(this._context,l.label),n=l.value,l=this._createRadioButton(n,g,f);n===d&&(l.checked=!0);f=this._createRadioButtonLabel(p,f);a.appendChild(l);a.appendChild(f);m.appendChild(a)}k.appendChild(m);c.appendChild(k)};a.prototype._getDefaultOptionValue=function(a){for(var b=0;b<a.length;b+=1)if(!0===a[b].default)return a[b].value;return a[0].value};a.prototype._createRadioButton=function(a,b,c){var d=document.createElement(\"input\");d.setAttribute(\"type\",\n\"radio\");d.setAttribute(\"name\",b);d.setAttribute(\"class\",\"radio-\"+b);d.setAttribute(\"value\",a);d.setAttribute(\"id\",c);d.onchange=this._handler;return d};a.prototype._createRadioButtonLabel=function(a,b){var c=document.createElement(\"label\");c.setAttribute(\"for\",b);c.textContent=a;return c};a.prototype.populate=function(a){var b=this._node&&this._node.querySelectorAll(\"input\");if(b)for(var c=0;c<b.length;c+=1){var d=b[c];if(d.checked){a[this._item.property]=d.value;break}}};a.prototype.rendersOwnTitle=\nfunction(){return!0};return a});$A.componentService.addLibraryInclude(\"js://reports.EclairConfigurerUtils.AxisRangeInput\",[\"js://reports.EclairConfigurerUtils.BaseInput\"],function(g){function f(a,b,c,d,e){g.call(this,a,b,c,d,e)}function l(a,b,c){b.id=b.id||m+n++;var d=document.createElement(\"div\");d.className=\"config-input-range-value-wrapper\";var e=document.createElement(\"label\");e.textContent=g.renderLabel(a,!c?p:q);e.setAttribute(\"for\",b.id);e.classList.add(\"label\");e.classList.add(\"item-title\");b.setAttribute(\"aria-describedby\",\n\"error\"+b.id);d.appendChild(e);d.appendChild(b);a=document.createElement(\"span\");a.className=\"range-error-label errorMessage hidden\";a.id=\"error\"+b.id;d.appendChild(a);return d}function h(a,b){var c=a.value.replace(b,k),d=parseFloat(c);return c===d.toString()?1E-130>d&&-1E-130<d?0:d:NaN}function r(){this._validateInputs();this._handler.apply(this)}var n=0,m=\"ECLAIR_CHART_CONFIG_RANGE_INPUT_\",k=\".\",s={section:\"EclairConfig\",id:\"invalidRange\",fallback:\"Invalid Range\"},t={section:\"EclairConfig\",id:\"tooLarge\",\nfallback:\"Enter a smaller number\"},u={section:\"EclairConfig\",id:\"tooSmall\",fallback:\"Enter a larger number\"},v={section:\"EclairConfig\",id:\"notANumber\",fallback:\"Not a number\"},q={section:\"EclairConfig\",id:\"maxAxisRange\",fallback:\"Max\"},p={section:\"EclairConfig\",id:\"minAxisRange\",fallback:\"Min\"};f.prototype=Object.create(g.prototype);f.prototype.constructor=f;f.prototype._renderInput=function(a,b){var c=document.createElement(\"input\");c.type=\"text\";c.step=\"1\";var d=this._context.decimalSeparator;c.addEventListener(\"keypress\",\nfunction(a){if(48<=a.charCode&&57>=a.charCode||45===a.charCode||a.charCode===d.charCodeAt(0))return!0;a.preventDefault();return!1});c.className=\"config-axisrange-input config-range-input-\"+a;var e=null;this._default&&(this._default.breakpoints&&void 0!==this._default.breakpoints[b]?e=this._default.breakpoints[b]:\"manual\"===this._default.rangeType&&(void 0!==this._default.min&&void 0!==this._default.max)&&(e=\"min\"===a?this._default.min:this._default.max));c.value=null==e?null:(\"\"+e).replace(k,d);c.onchange=\nr.bind(this);return l(this._context,c,b)};f.prototype.render=function(a){var b,c;b=document.createElement(\"fieldset\");b.className=\"config-input config-axis-range\";c=document.createElement(\"legend\");c.textContent=g.renderLabel(this._context,this._item.label);c.className=\"slds-assistive-text\";b.appendChild(c);c=document.createElement(\"div\");!1===this._context.isAxisRangeVisible&&\"axisRange\"===this._item.property?c.style.display=\"none\":(c.className=\"config-input-axis-range-container\",c.appendChild(this._renderInput(\"min\",\n0)),c.appendChild(this._renderInput(\"max\",1)),this._node=b,b.appendChild(c),a.appendChild(b),this._validateInputs())};f.prototype.populate=function(a){var b={breakpoints:[]},c=!1!==this._context.isAxisRangeVisible&&this._node.querySelector(\".config-range-input-min\"),d=!1!==this._context.isAxisRangeVisible&&this._node.querySelector(\".config-range-input-max\");c&&b.breakpoints.push(c.value&&h(c,this._context.decimalSeparator));d&&b.breakpoints.push(d.value&&h(d,this._context.decimalSeparator));a[this._item.property]=\nb};f.prototype.focus=function(){var a=this._node.querySelector(\".config-range-input-min\");a&&a.focus()};f.prototype._validateInputs=function(){var a=[];a.push(this._node.querySelector(\".config-range-input-min\"));a.push(this._node.querySelector(\".config-range-input-max\"));this._hasError=!1;a.forEach(function(b,c){if(\"\"!==b.value){var d=h(b,this._context.decimalSeparator);this._toggleError(b,this._getValueError(d)||c&&d<=h(a[c-1],this._context.decimalSeparator)&&g.renderLabel(this._context,s))}},this)};\nf.prototype._toggleError=function(a,b){b?(this._hasError=!0,a.classList.add(\"error\"),a.nextSibling.classList.remove(\"hidden\"),a.nextSibling.innerHTML=b):(a.classList.remove(\"error\"),a.nextSibling.classList.add(\"hidden\"),a.nextSibling.innerHTML=\"\")};f.prototype._getValueError=function(a){return!isFinite(a)&&g.renderLabel(this._context,v)||1E130<a&&g.renderLabel(this._context,t)||-1E130>a&&g.renderLabel(this._context,u)};return f});}"}"createdN P{óIBwB"expiresN P5ÏJBwB"valueEncodedF{"sizeIü…"expiresN P5ÏJBwB{